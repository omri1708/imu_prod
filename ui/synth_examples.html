<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>IMU Synth Examples</title>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<style>
body{font-family:system-ui,sans-serif;background:#0b1020;color:#e6edf3;margin:0}
header{padding:10px 14px;background:#11162a;border-bottom:1px solid #1f2a44;display:flex;gap:10px;align-items:center}
.badge{background:#243152;border:1px solid #355;color:#9fb7ff;border-radius:999px;padding:2px 8px;font-size:12px}
main{display:grid;grid-template-columns:1fr 1fr;gap:12px;padding:12px}
.card{background:#12172d;border:1px solid #233259;border-radius:10px;padding:12px}
label{display:block;font-size:12px;color:#9fb7ff}
input,textarea,button{background:#0e1630;border:1px solid #233259;color:#e6edf3;border-radius:8px;padding:6px 8px}
textarea{width:100%;height:140px;font-family:ui-monospace,menlo,consolas,monospace}
pre{background:#0e1630;border:1px solid #233259;border-radius:8px;padding:8px;overflow:auto}
</style>
</head>
<body>
<header>
  <strong>IMU Synth Examples</strong>
  <a class="badge" href="/ui/index.html" style="text-decoration:none">home</a>
</header>
<main>
  <div class="card">
    <h3>db.pg.backup</h3>
    <label>Params (JSON)</label>
    <textarea id="p1">{
  "db_url":"postgres://user:pass@localhost:5432/app?sslmode=disable",
  "out":"/tmp/app.sql",
  "format":"p",
  "schema_opt":"",
  "owner_opt":" --no-owner",
  "jobs_opt":""
}</textarea>
    <div><button onclick="run('db.pg.backup','p1')">Dry-Run</button></div>
    <pre id="o1"></pre>
  </div>
  <div class="card">
    <h3>queue.redis.subscribe</h3>
    <label>Params (JSON)</label>
    <textarea id="p2">{
  "host":"127.0.0.1",
  "port":6379,
  "channel":"events",
  "auth_opt":"",
  "db_opt":""
}</textarea>
    <div><button onclick="run('queue.redis.subscribe','p2')">Dry-Run</button></div>
    <pre id="o2"></pre>
  </div>
  <div class="card">
    <h3>storage.s3.sync</h3>
    <label>Params (JSON)</label>
    <textarea id="p3">{
  "src":"./out",
  "dst":"s3://my-bucket/backup",
  "profile_opt":" --profile default",
  "region_opt":" --region us-east-1",
  "extra_opt":" --delete"
}</textarea>
    <div><button onclick="run('storage.s3.sync','p3')">Dry-Run</button></div>
    <pre id="o3"></pre>
  </div>
</main>
<script>
async function run(kind, pid){
  const params = JSON.parse(document.getElementById(pid).value);
  const r = await fetch('/adapters/dry_run', {method:'POST', headers:{'content-type':'application/json'},
    body:JSON.stringify({user_id:'demo-user', kind, params})});
  const j = await r.json();
  document.getElementById('o'+pid.slice(-1)).textContent = JSON.stringify(j, null, 2);
}
</script>
</body>
</html>